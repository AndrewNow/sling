---
import Layout from "../layouts/BaseLayout.astro";
import InformationModalInner from "../components/informationModalInner.astro";
---

<Layout>
  <div class="homepage-parent">
    <div class="homepage-wrapper" id="wrapper">
      <div class="homepage-inner">
        <div class="sling-bg">
          <img src="/images/Sling.png" id="sling-logo" />
        </div>
        <!-- <div class="webgl-wrapper" id="canvas-container">
            <canvas class="webgl" id="webgl-canvas"></canvas>
          </div> -->
        <!-- <h3>
          Sling was born out of our love of creating meaningful products, and
          our disdain for the status quo. In our years of experience working
          freelance and for big agencies, we've seen it all â€” so we found a
          better way to run a creative business, for us and for everyone we work
          with.
        </h3> -->
        <div class="button" id="info">
          <button id="info">Information</button>
        </div>
      </div>
    </div>

    <div class="info-modal" id="modal">
      <div class="info-modal-scroll-track">
        <div class="close-btn">
          <button id="close">Close</button>
          <InformationModalInner />
        </div>
      </div>
    </div>
  </div>
  <!-- <span class="email-copied" id="copy-success">Email copied!</span> -->
</Layout>

<style lang="scss">
  .email-copied {
    font-size: 96px;
    white-space: nowrap;
    position: fixed;
    z-index: 1000;
    top: 50%;
    left: 0%;
    transform: translate(100%, -50%) rotate(30deg);
    background: #e1e31b;
    padding: 3rem;
    font-family: "Arial-narrow";
    text-transform: uppercase;
  }

  html {
    background: #ecf96e;
  }

  .homepage-parent {
    margin: 0 auto;
    position: fixed;
    z-index: 1;
    height: 100svh;
    width: 100vw;
    perspective: 1000px;
    // transform: translateY(100%);
  }
  .homepage-wrapper {
    background: white;
    padding: 1.25rem;
    position: relative;
    height: 100svh;
    // max-width: 700px;
    margin: 0 auto;
    display: grid;
    place-items: center;
    // border: 2px solid green;

    h3 {
      margin: 3rem 0;
    }
  }

  .homepage-inner {
    width: 100%; // new
    // border: 1px solid red;
    display: grid;
    place-items: center;
    position: relative;
    // margin-bottom: 9rem;

    img {
      position: relative;
      z-index: 3;
      width: 100px;
      margin: 0 auto;
      filter: invert(1);
      transform-origin: top;
    }
  }

  // .sling-bg {
  //   width: 100%;
  //   // margin: 2rem auto;
  //   // position: absolute;
  //   // top: 50%;
  //   // left: 50%;
  //   // transform: translate(-50%, -50%);
  //   border: 1px solid;
  //   height: 500px;

  //   img {
  //     position: relative;
  //     z-index: 3;
  //     width: 100px;
  //     margin: 0 auto;
  //     filter: invert(1);
  //     transform-origin: top;
  //   }
  // }

  .webgl-wrapper {
    // border: 1px solid;
    // margin: 0 auto;
    aspect-ratio: 3/2;
    position: relative;
    // height: 20vh;
    height: auto;
    // width: 40%;
  }
  .webgl {
    transform: translateY(2rem);
    display: block;
    height: 100%;
    width: 100%;
  }

  .canvas-wrapper {
    // border: 1px solid red;
    position: relative;
    height: 33vh;
    width: 100%;
  }

  .homepage-wrapper,
  .info-modal {
    h3 {
      font-size: 22px;
      letter-spacing: unset;
    }
  }

  .button {
    z-index: 2;
    opacity: 0;
    position: absolute;
    // padding: 3rem 0;
    #info {
      // opacity: 0; // new
      padding: 1rem 1.75rem;
      // display: inline-block; // old
      display: block;
      // width: 80%; // old
      width: auto;
      margin: 0 auto;
      // font-size: 23px; // old
      font-size: 20px;
      font-family: Arial, Helvetica, sans-serif;
      // border-radius: 14px; // old
      border-radius: 8px;
      border: 1px solid #e1e1e1;
      background: linear-gradient(180deg, #f8f8f8 0%, #fefefe 100%);
      box-shadow:
        0px -1px 1px 1px #b0b0b0 inset,
        0px 0px 1px 0px #fcfcfc inset;
      cursor: pointer;
      transition: 0.25s all ease;
    }
  }

  .button:hover {
    #info {
      box-shadow:
        0px 1px 5px 1px #b0b0b0 inset,
        0px -1px 1px 0px #fcfcfc inset;
      transform: translateY(2px);
    }
  }

  .info-modal {
    position: fixed;
    z-index: 2;
    top: 0%;
    left: 0;
    width: 100vw;
    // max-width: 700px;
    // margin: 0 auto;
    height: 100vh;
    overflow-y: scroll;
    transform: translateY(100%);
    z-index: 10;
  }
  .info-modal-scroll-track {
    position: absolute;
    top: 2rem;
    left: 0%;
    background: white;
    height: auto;
    width: 100vw;
    border-radius: 15px 15px 0px 0px;
    // box-shadow: 0px -5px 70px 0px rgba(0, 0, 0, 0.05);
  }
  .close-btn {
    width: 100%;

    button {
      background: none;
      border: unset;
      font-family: "Arial-narrow";
      font-size: 22px;
      width: 100%;
      display: inline-block;
      margin: 1rem auto;
      cursor: pointer;
    }
  }
</style>

<script src="../components/three/experience.js"></script>

<script>
  import { animate, spring } from "motion";

  const slingLogo = document.getElementById("sling-logo");
  const mainBg = document.getElementById("wrapper");
  const infoBtn = document.getElementById("info");
  const modal = document.getElementById("modal");
  const closeBtn = document.getElementById("close");

  animate(
    mainBg,
    {
      // transform: "translateY(0%)",
      // scaleY: [0, 1]
      y: ["100vh", "0vh"],
      borderRadius: ["40px", "0px"],
    },
    {
      borderRadius: { easing: "ease-in-out", duration: 2.5, delay: 0.25 },
      y: {
        easing: spring({
          velocity: 2000,
          stiffness: 350,
          damping: 110,
          mass: 15,
        }),
        delay: 0.25,
      },
    }
  );

  animate(
    slingLogo,
    {
      y: ["100vh", "0vh"],
      scaleY: 1,
      scaleX: 1,
    },
    {
      scaleY: {
        easing: spring({
          velocity: 50,
          stiffness: 400,
          damping: 50,
          mass: 8,
        }),
      },
      scaleX: {
        easing: spring({
          velocity: 100,
          stiffness: 300,
          damping: 50,
          mass: 8,
        }),
      },
    }
  ).finished.then(() => {
    animate(
      infoBtn,
      {
        opacity: 1,
      },
      {
        duration: 1,
      }
    );
    animate(slingLogo, {
      y: "-150%",
    });
  });
  // animate(
  //   slingLogo,
  //   {
  //     // y: ["100vh", "0vh"],
  //     scaleY: [1, 1],
  //   },
  //   {
  //     easing: spring({
  //       velocity: 50,
  //       stiffness: 300,
  //       damping: 50,
  //       mass: 8,
  //     }),
  //   }
  // );

  infoBtn.addEventListener("click", () => {
    animate(
      mainBg,
      {
        transform: "translate3d(0, -20px, -100px)",
        borderRadius: "15px 15px 0px 0px",
        opacity: 0.95,
        filter: "brightness(.95)",
      },
      {
        duration: 0.25,
        easing: "ease-in-out",
      }
    );
    animate(
      modal,
      {
        transform: "translateY(0%)",
      },
      {
        delay: 0,
        duration: 0.3,
        easing: "ease-out",
      }
    );
  });
  closeBtn.addEventListener("click", () => {
    animate(
      mainBg,
      {
        transform: "translateZ(0px)",
        opacity: 1,
        filter: "brightness(1)",
      },
      {
        delay: 0,
        duration: 0.25,
        easing: "ease-in-out",
      }
    );
    animate(
      mainBg,
      {
        borderRadius: "0px 0px 0px 0px",
      },
      {
        delay: 0.15,
        duration: 0.05,
        easing: "ease-in-out",
      }
    );
    animate(
      modal,
      {
        transform: "translateY(100%)",
      },
      {
        duration: 0.25,
        easing: "ease-in-out",
      }
    );
  });
</script>
