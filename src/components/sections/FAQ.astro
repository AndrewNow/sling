---
const { faq } = Astro.props;
---

<div class="flex flex-col gap-2 py-14 lg:py-[40vh]">
  <h2 class="text-area mb-16 text-center">
    You might be wondering:
  </h2>
  {
    faq.map((entry) => {
      return (
        <div
          class="border rounded-2xl border-gray-300 border-dashed p-6 bg-gray-50/55 cursor-pointer transition-colors"
          role="button"
          aria-expanded="false"
        >
          <div class="flex w-full justify-between text-left">
            <span class="h4 font-medium text-grey-900 user-select-none">
              {entry.question}
            </span>
            <span class="ml-6 flex items-center text-grey-500">
              <svg
                class="h-6 w-6 transform transition-transform duration-200 user-select-none"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"
                />
              </svg>
            </span>
          </div>
          <div
            class="overflow-hidden transition-[height] duration-200 ease-out"
            style="height: 0"
            role="region"
          >
            <div class="pt-8">
              <p class="p text-gray-500 whitespace-pre-line text-balance user-select-none">
                {entry.answer}
              </p>
            </div>
          </div>
        </div>
      );
    })
  }
</div>

<script>
  document.querySelectorAll("div[aria-expanded]").forEach((div) => {
    div.addEventListener("click", () => {
      const content = div.querySelector('[role="region"]');
      const inner = content.firstElementChild;
      const isExpanded = div.getAttribute("aria-expanded") === "true";

      // Toggle the aria-expanded attribute
      div.setAttribute("aria-expanded", !isExpanded);

      // Animate height
      if (!isExpanded) {
        content.style.height = inner.offsetHeight + "px";
      } else {
        content.style.height = "0";
      }

      // Rotate chevron
      div.querySelector("svg").style.transform = !isExpanded
        ? "rotate(180deg)"
        : "";
    });
  });
</script>
